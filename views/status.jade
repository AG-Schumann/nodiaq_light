extends layout

block extrahead
  script(src="javascripts/moment.min.js", type="text/javascript")
  script(src="javascripts/status_script.js", type="text/javascript")

  link(href="stylesheets/status_style.css", rel="stylesheet")
  link(href="stylesheets/custom-select.css", rel="stylesheet")
  script(src="javascripts/highcharts-more.js", type='text/javascript')
  script(src="javascripts/solid-gauge.js", type='text/javascript')
    
block content
  - var readers = ["reader0_reader_0", 'reader1_reader_0', 'reader2_reader_0'];
  - var controllers = ["reader0_controller_0"];
  - var brokers = [];  // ["fdaq00_broker_0_tpc", "fdaq00_broker_0_muon_veto", "fdaq00_broker_0_neutron_veto"];
  - var atts = ['active', 'comment', 'detector', 'hosts', 'crate_controller', 'diagnosis', 'mode', 'number', 'started_at', 'status', 'stop_after', 'user'];
  - var controller_atts = ['host', 'status', 'checkin'];
  - var controller_labels = ['Host', 'Status', 'Check-in'];
  div.main-container.container-fluid

      div.row(style="width:100%")
        div.fullsizechart
          div.chart_header(style='font-size:12px')
            strong(style='font-size:22px') Status History
            &nbsp;&nbsp;
            strong(style='font-size:12px') Time: &nbsp;
            select.cselect#menu_history_s(style="width:100px")
              option(value=172800) 48h
              option(value=129600) 36h
              option(value=86400 selected) 24h
              option(value=43200) 12h
              option(value=21600) 6h
              option(value=3600) 1h
            &nbsp;&nbsp;
            strong(style='font-size:12px') Resolution: &nbsp;
            select.cselect#menu_resolution_s(style="width:100px")
              option(value=1) 1s (max)
              option(value=10) 10s
              option(value=30) 30s
              option(value=60 selected) 1m
              option (value=300) 5m
              option(value=600) 10m
            &nbsp;&nbsp;
            strong(style='font-size:12px') Variable: &nbsp;
            select.cselect#menu_variable_s(style="width:100px")
              option(value='rate') Data Rate
              option(value='buff') Buffer Size
            &nbsp;&nbsp;
            button.btn.btn-info#update_button(style="height:80%;padding-top:3px" onclick="RedrawRatePlot()") Update
          div.chart_body#rate_chart(style="height:300px")
      div.row(style="width:100%;margin:0;padding-top:5px")
        div.col-sm-12.col-md-12.col-lg-6#reader_panel(style="padding:5px")
        div.col-sm-12.col-md-12.col-lg-6(style="padding:5px")
          h5(style='background-color:#151675;color:white;padding:3px;padding-left:5px;width:100%') Crate Controller
          each controller in controllers                    
            strong(id="#{controller}_host")
            span : &nbsp;&nbsp;
            strong(id="#{controller}_status")
            span &nbsp;(
            span(id="#{controller}_checkin")
            span ) &nbsp;&nbsp;
            span(id="#{controller}_devices")
        div.col-sm-12.col-md-12.col-lg-6(style="padding:5px;border:0px solid #ccc;")
          div(style="width:100%;border-bottom:1px solid #ccc;background-color:#151675;color:white;padding-left:5px;")
            h5 Recent Dispatcher Commands
          div.panel-group#command_panel(style="font-size:14px")
        div.col-sm-12.col-md-12.col-lg-6(style="padding:5px;border:0px solid #ccc;")
          div(style="width:100%;border-bottom:1px solid #ccc;background-color:#151675;color:white;padding-left:5px;")
            h5 Ceph Status
          div.row
            div.col-6.col-sm-12#ceph_chartdiv
            div.col-6.col-sm-12
              div(style="width:100%")
                a(href="") Ceph Admin Dashboard (doesn't exist yet)
              div(style="width:100%")
                strong Storage Total
                span#ceph_storage_total
              div(style="width:100%")
                strong Storage Free
                span#ceph_storage_free
              div(style="width:100%")
                strong Storage Available
                span#ceph_storage_available
          div(style="width:100%;border-bottom:1px solid #ccc;background-color:#151675;color:white;padding-left:5px;")
            h5 Live Processing Nodes
      
  script.
    var readers = ["fdaq00_reader_0", "fdaq00_reader_1"];
    $(document).ready(function () {
      //FYouButton('update_button');
      RedrawRatePlot();
      MakeCephGauge();
      DrawInitialStatus();
      UpdateStatusPage();
      DrawActiveLink("#lstatus");
    });
      
    